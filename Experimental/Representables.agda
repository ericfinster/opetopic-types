open import Cubical.Foundations.Everything
open import Cubical.Data.Nat 
open import Cubical.Data.Sum 

open import Core.Everything

module Experimental.Representables where

  Reprâ‚‹â‚‚ : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ) â†’ ğ•†Type n â„“-zero

  data Faceâ‚‹â‚‚ : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ) (ğ‘ : ğ’« (ğ‘œ âˆ£ ğ‘))
    â†’ {ğ‘œ' : ğ’ª n} â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ ğ‘) ğ‘œ' â†’ Type 

  Reprâ‚‹â‚‚ â— objâ‚’ = tt*
  Reprâ‚‹â‚‚ (ğ‘œ âˆ£ ğ‘) ğ‘ = Reprâ‚‹â‚‚ ğ‘œ ğ‘ , Faceâ‚‹â‚‚ ğ‘ ğ‘

  outer-frm : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
    â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ ğ‘) ğ‘œ

  outer-cns : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ) 
    â†’ Cns (Reprâ‚‹â‚‚ ğ‘œ ğ‘) (outer-frm ğ‘œ ğ‘) ğ‘ 

  base-cns : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
    â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
    â†’ Cns (Reprâ‚‹â‚‚ ğ‘œ ğ‘) (outer-frm ğ‘œ ğ‘) ğ‘
    â†’ Cns (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) ğ‘

  -- base-face : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  --   â†’ (p : Pos ğ‘)
  --   â†’ Faceâ‚‹â‚‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ)
  --     (Shp (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (base-cns ğ‘œ ğ‘ ğ‘ (outer-cns ğ‘œ ğ‘)) p)
  -- base-face = ? 

  pos-cns : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
    â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p)) (p : Pos ğ‘)
    â†’ Cns (Reprâ‚‹â‚‚ (Typ ğ‘ p) (ğ‘ p)) (outer-frm (Typ ğ‘ p) (ğ‘ p)) (ğ‘ p)
    â†’ Cns (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (Î¼â‚’ ğ‘ ğ‘)

  data Faceâ‚‹â‚‚ where

    lf-face : {n : â„•} (ğ‘œ : ğ’ª n)
      â†’ Faceâ‚‹â‚‚ (Î·â‚’ ğ‘œ) lfâ‚’ (outer-frm ğ‘œ (Î·â‚’ ğ‘œ))

    nd-face : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
      â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
      â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
      â†’ Faceâ‚‹â‚‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) (outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘))

  outer-frm â— ğ‘ = tt*
  outer-frm (ğ‘œ âˆ£ .(Î·â‚’ ğ‘œ)) lfâ‚’ = outer-frm ğ‘œ (Î·â‚’ ğ‘œ) , lf-face ğ‘œ , Î· (Reprâ‚‹â‚‚ ğ‘œ (Î·â‚’ ğ‘œ)) (outer-frm ğ‘œ (Î·â‚’ ğ‘œ)) , const (lf-face ğ‘œ)
  outer-frm (ğ‘œ âˆ£ .(Î¼â‚’ ğ‘ ğ‘)) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) = outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘) , nd-face ğ‘ ğ‘ ğ‘Ÿ , c , y

    where c : Cns (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (Î¼â‚’ ğ‘ ğ‘)
          c = {!!} --Î¼ (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) {f = outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)} {!outer-cns ğ‘œ ğ‘!} {!!}

          y : (p : Pos (Î¼â‚’ ğ‘ ğ‘)) â†’ Faceâ‚‹â‚‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) (Shp (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) c p)
          y p = {!!}

  outer-cns â— ğ‘ = tt*
  outer-cns (ğ‘œ âˆ£ .(Î·â‚’ ğ‘œ)) lfâ‚’ = lf (lf-face ğ‘œ)
  outer-cns (ğ‘œ âˆ£ .(Î¼â‚’ ğ‘ ğ‘)) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) = 
    nd {f = outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)} (nd-face ğ‘ ğ‘ ğ‘Ÿ)
        (base-cns ğ‘œ ğ‘ ğ‘ (outer-cns ğ‘œ ğ‘))
        {!!} {!!} {!!} {!!}
       -- (Î¼-fst-cns ğ‘ ğ‘ ğ‘Ÿ) (Î¼-fst-dec ğ‘ ğ‘ ğ‘Ÿ)
       -- (Î¼-snd-cns ğ‘ ğ‘ ğ‘Ÿ) (Î¼-snd-dec ğ‘ ğ‘ ğ‘Ÿ) (Î» p â†’ {!outer-cns ğ‘œ ğ‘!})

  base-cns = {!!} 
  pos-cns = {!!} 



  -- -- base-map : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  -- --   â†’ Cns (Reprâ‚‹â‚‚ ğ‘œ ğ‘) (outer-frm ğ‘œ ğ‘) ğ‘
  -- --   â†’ Cns (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (Î¼â‚’ ğ‘ ğ‘)
  -- -- base-map = {!!} 

  -- -- pos-map : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p)) (p : Pos ğ‘)
  -- --   â†’ Cns (Reprâ‚‹â‚‚ (Typ ğ‘ p) (ğ‘ p)) (outer-frm (Typ ğ‘ p) (ğ‘ p)) (ğ‘ p)
  -- --   â†’ Cns (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (Î¼â‚’ ğ‘ ğ‘)
  -- -- pos-map = {!!} 

  -- base-map : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  --   â†’ Reprâ‚‹â‚‚ ğ‘œ ğ‘ â‡’ Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)
  -- base-map = {!!} 

  -- pos-map : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  --   â†’ (p : Pos ğ‘)
  --   â†’ Reprâ‚‹â‚‚ (Typ ğ‘ p) (ğ‘ p) â‡’ Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)
  -- pos-map = {!!} 

  -- data Faceâ‚‹â‚‚' : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ) (ğ‘ : ğ’« (ğ‘œ âˆ£ ğ‘))
  --   â†’ {ğ‘œ' : ğ’ª n} â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ ğ‘) ğ‘œ' â†’ Type where

  --   lf-face : {n : â„•} (ğ‘œ : ğ’ª n)
  --     â†’ Faceâ‚‹â‚‚' (Î·â‚’ ğ‘œ) lfâ‚’ {!!}

  --   nd-face : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  --     â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  --     â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
  --     â†’ Faceâ‚‹â‚‚' (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) {!!}


  -- Î¼-fst-cns : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  --   â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
  --   â†’ Cns (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) ğ‘ 

  -- Î¼-snd-cns : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  --   â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
  --   â†’ (p : Pos ğ‘) â†’ Cns (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (Shp (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (Î¼-fst-cns ğ‘ ğ‘ ğ‘Ÿ) p) (ğ‘ p)

  -- Î¼-fst-dec : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  --   â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
  --   â†’ (p : Pos ğ‘) â†’ Faceâ‚‹â‚‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) (Shp (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (Î¼-fst-cns ğ‘ ğ‘ ğ‘Ÿ) p) 

  -- Î¼-snd-dec :{n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  --   â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
  --   â†’ (p : Pos ğ‘) (q : Pos (ğ‘ p))
  --   â†’ Faceâ‚‹â‚‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) (Shp (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (Î¼-snd-cns ğ‘ ğ‘ ğ‘Ÿ p) q)



  -- data Faceâ‚‹â‚‚ where

  --   lf-face : {n : â„•} (ğ‘œ : ğ’ª n)
  --     â†’ Faceâ‚‹â‚‚ (Î·â‚’ ğ‘œ) lfâ‚’ (outer-frm ğ‘œ (Î·â‚’ ğ‘œ))

  --   nd-face : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  --     â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  --     â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
  --     â†’ Faceâ‚‹â‚‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) (outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘))

  -- outer-frm â— ğ‘ = tt*
  -- outer-frm (ğ‘œ âˆ£ .(Î·â‚’ ğ‘œ)) lfâ‚’ = outer-frm ğ‘œ (Î·â‚’ ğ‘œ) , lf-face ğ‘œ , Î· (Reprâ‚‹â‚‚ ğ‘œ (Î·â‚’ ğ‘œ)) (outer-frm ğ‘œ (Î·â‚’ ğ‘œ)) , const (lf-face ğ‘œ)
  -- outer-frm (ğ‘œ âˆ£ .(Î¼â‚’ ğ‘ ğ‘)) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) = outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘) , nd-face ğ‘ ğ‘ ğ‘Ÿ , c , y

  -- --   where c : Cns (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (Î¼â‚’ ğ‘ ğ‘)
  -- --         c = Î¼ (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) {f = outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)} {!outer-cns ğ‘œ ğ‘!} {!!}

  -- --         y : (p : Pos (Î¼â‚’ ğ‘ ğ‘)) â†’ Faceâ‚‹â‚‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) (Shp (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) c p)
  -- --         y p = {!!}

  --   where c : Cns (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) (Î¼â‚’ ğ‘ ğ‘)
  --         c = Î¼ (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) {f = outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)} {ğ‘ = ğ‘} (Î¼-fst-cns ğ‘ ğ‘ ğ‘Ÿ) {ğ‘ = ğ‘} (Î¼-snd-cns ğ‘ ğ‘ ğ‘Ÿ)

  --         y : (p : Pos (Î¼â‚’ ğ‘ ğ‘)) â†’ Faceâ‚‹â‚‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) (Shp (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) c p)
  --         y p = Î¼-snd-dec ğ‘ ğ‘ ğ‘Ÿ (fstâ‚š ğ‘ ğ‘ p) (sndâ‚š ğ‘ ğ‘ p) 

  -- outer-cns â— ğ‘ = tt*
  -- outer-cns (ğ‘œ âˆ£ .(Î·â‚’ ğ‘œ)) lfâ‚’ = lf (lf-face ğ‘œ)
  -- outer-cns (ğ‘œ âˆ£ .(Î¼â‚’ ğ‘ ğ‘)) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) = 
  --   nd {f = outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘)} (nd-face ğ‘ ğ‘ ğ‘Ÿ) 
  --      (Î¼-fst-cns ğ‘ ğ‘ ğ‘Ÿ) (Î¼-fst-dec ğ‘ ğ‘ ğ‘Ÿ)
  --      (Î¼-snd-cns ğ‘ ğ‘ ğ‘Ÿ) (Î¼-snd-dec ğ‘ ğ‘ ğ‘Ÿ) (Î» p â†’ {!outer-cns ğ‘œ ğ‘!})

  -- -- Okay, interesting.  So we need decorating functions, and that's
  -- -- basically going to be force.  And then we'll fall back to
  -- -- grafting and have to have similar combinators, I suppose....

  -- Î¼-fst-cns objâ‚’ ğ‘ ğ‘Ÿ = tt*
  -- Î¼-fst-cns (lfâ‚’ {ğ‘œ = ğ‘œ}) ğ‘ ğ‘Ÿ = lf (lf-face ğ‘œ)
  -- Î¼-fst-cns (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) Îº ğ‘Ÿğ‘Ÿ = {!!}

  -- Î¼-snd-cns objâ‚’ ğ‘ ğ‘Ÿ p = tt*
  -- Î¼-snd-cns (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) ğ‘ğ‘ ğ‘Ÿğ‘Ÿ (inl tt) = {!!}
  -- Î¼-snd-cns (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) ğ‘ğ‘ ğ‘Ÿğ‘Ÿ (inr (p , q)) = {!!}

  -- Î¼-fst-dec = {!!} 
  -- Î¼-snd-dec = {!!} 



  -- -- Reprâ‚‹â‚ : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ) â†’ ğ•†Type (1 + n) â„“-zero

  -- -- tgt-incl : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ) (ğ‘ : ğ’« (ğ‘œ âˆ£ ğ‘))
  -- --   â†’ Reprâ‚‹â‚ ğ‘œ ğ‘ â‡’ Reprâ‚‹â‚‚ (ğ‘œ âˆ£ ğ‘) ğ‘

  -- -- lf-incl : âˆ€ {n} (ğ‘œ : ğ’ª n)
  -- --   â†’ Reprâ‚‹â‚ ğ‘œ (Î·â‚’ ğ‘œ) â‡’ Reprâ‚‹â‚‚ (ğ‘œ âˆ£ Î·â‚’ ğ‘œ) lfâ‚’

  -- -- nd-incl : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  -- --   â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
  -- --   â†’ Reprâ‚‹â‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘) â‡’ Reprâ‚‹â‚‚ (ğ‘œ âˆ£ Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ)

  -- -- âˆ‚-frm : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ Frm (Reprâ‚‹â‚ ğ‘œ ğ‘) (ğ‘œ âˆ£ ğ‘)


  -- -- data Faceâ‚‹â‚ : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ) (ğ‘ : ğ’« (ğ‘œ âˆ£ ğ‘))
  -- --   â†’ {ğ‘œ' : ğ’ª (suc n)} â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ ğ‘ , Faceâ‚‹â‚‚ ğ‘ ğ‘) ğ‘œ' â†’ Type 


  -- -- Reprâ‚‹â‚ â— objâ‚’ = tt* , const Unit
  -- -- Reprâ‚‹â‚ (ğ‘œ âˆ£ ğ‘) ğ‘ = (Reprâ‚‹â‚‚ ğ‘œ ğ‘ , Faceâ‚‹â‚‚ ğ‘ ğ‘) , Faceâ‚‹â‚ ğ‘ ğ‘

  -- -- postulate
  
  -- --   outer-frm : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --     â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ ğ‘) ğ‘œ


  -- -- data Faceâ‚‹â‚ where

  -- --   src-face : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  -- --     â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  -- --     â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
  -- --     â†’ Faceâ‚‹â‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) {!!} 

  -- --   tgt-face : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ) (ğ‘ : ğ’« (ğ‘œ âˆ£ ğ‘))
  -- --     â†’ Faceâ‚‹â‚ ğ‘ ğ‘ {ğ‘œ' = ğ‘œ âˆ£ ğ‘} (outer-frm ğ‘œ ğ‘ , {!!} , {!!} , {!!})


  -- -- tgt-incl = {!!} 
  -- -- lf-incl = {!!} 
  -- -- nd-incl = {!!} 
  -- -- âˆ‚-frm = {!!} 



  -- -- outer-frm : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ ğ‘) ğ‘œ

  -- -- outer-cns : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ Cns (Reprâ‚‹â‚‚ ğ‘œ ğ‘) (outer-frm ğ‘œ ğ‘) ğ‘

  -- -- base-map : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  -- --   â†’ Reprâ‚‹â‚‚ ğ‘œ ğ‘ â‡’ Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)
  -- -- base-map = {!!} 

  -- -- pos-map : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  -- --   â†’ (p : Pos ğ‘)
  -- --   â†’ Reprâ‚‹â‚‚ (Typ ğ‘ p) (ğ‘ p) â‡’ Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)
  -- -- pos-map = {!!} 

  -- -- âˆ‚-inc : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ) (ğ‘ : ğ’« (ğ‘œ âˆ£ ğ‘))
  -- --   â†’ Reprâ‚‹â‚ ğ‘œ ğ‘ â‡’ Reprâ‚‹â‚‚ (ğ‘œ âˆ£ ğ‘) ğ‘
  -- -- âˆ‚-inc = {!!} 

  -- -- src-inc : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ) (ğ‘ : ğ’« (ğ‘œ âˆ£ ğ‘)) 
  -- --   â†’ (p : Pos ğ‘) â†’ Reprâ‚‹â‚ {!Typ ğ‘ p!} {!!} â‡’ Reprâ‚‹â‚‚ (ğ‘œ âˆ£ ğ‘) ğ‘
  -- -- src-inc ğ‘ ğ‘ p = {!!} 

  -- -- âˆ‚-frm : {n : â„•} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ Frm (Reprâ‚‹â‚ ğ‘œ ğ‘) (ğ‘œ âˆ£ ğ‘)
  -- -- âˆ‚-frm ğ‘œ ğ‘ = {!!} 

  -- -- data Faceâ‚‹â‚‚ where

  -- --   lf-case : {n : â„•} (ğ‘œ : ğ’ª n)
  -- --     â†’ Faceâ‚‹â‚‚ (Î·â‚’ ğ‘œ) lfâ‚’ (outer-frm ğ‘œ (Î·â‚’ ğ‘œ))

  -- --   nd-case : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  -- --     â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  -- --     â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
  -- --     â†’ Faceâ‚‹â‚‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) (outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘))

  -- -- data Faceâ‚‹â‚ where

  -- --   src-face : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  -- --     â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  -- --     â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
  -- --     â†’ Faceâ‚‹â‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) {ğ‘œ' = ğ‘œ âˆ£ ğ‘} (outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘) , nd-case ğ‘ ğ‘ ğ‘Ÿ , {!!} , {!!})

  -- --   tgt-face : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ) (ğ‘ : ğ’« (ğ‘œ âˆ£ ğ‘))
  -- --     â†’ Faceâ‚‹â‚ ğ‘ ğ‘ {ğ‘œ' = ğ‘œ âˆ£ ğ‘} {!âˆ‚-frm ğ‘œ ğ‘!}




  -- -- outer-frm = {!!}
  -- -- outer-cns = {!!} 


  -- -- outer-frm .â— objâ‚’ = tt*
  -- -- outer-frm .(_ âˆ£ Î·â‚’ _) (lfâ‚’ {ğ‘œ = ğ‘œ}) = outer-frm ğ‘œ (Î·â‚’ ğ‘œ) , lf-case ğ‘œ , Î· (Reprâ‚‹â‚‚ ğ‘œ (Î·â‚’ ğ‘œ)) (outer-frm ğ‘œ (Î·â‚’ ğ‘œ)) , const (lf-case ğ‘œ)
  -- -- outer-frm .(_ âˆ£ Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ {ğ‘œ = ğ‘œ} ğ‘ ğ‘ ğ‘Ÿ) = outer-frm ğ‘œ (Î¼â‚’ ğ‘ ğ‘) , nd-case ğ‘ ğ‘ ğ‘Ÿ , Î¼ (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) {!Cnsâ‡’ (base-map ğ‘œ ğ‘ ğ‘) (outer-cns ğ‘œ ğ‘)!} {!!} , {!!} 

  -- -- outer-cns .â— objâ‚’ = tt*
  -- -- outer-cns .(_ âˆ£ Î·â‚’ _) (lfâ‚’ {ğ‘œ = ğ‘œ})  = lf {f = outer-frm ğ‘œ (Î·â‚’ ğ‘œ)} (lf-case ğ‘œ)
  -- -- outer-cns .(_ âˆ£ Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ {ğ‘œ = ğ‘œ} ğ‘ ğ‘ ğ‘Ÿ) = {!!}



  -- -- outer-cns : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ Cns (Reprâ‚‹â‚‚ ğ‘œ ğ‘) (outer-frm ğ‘œ ğ‘) ğ‘


  -- -- data NdCns {n â„“} (X : ğ•†Type (suc n) â„“)
  -- --       (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --       (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  -- --       (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
        
  -- --   : Frm X (ğ‘œ âˆ£ Î¼â‚’ ğ‘ ğ‘) â†’ Type â„“ where

  --   -- nd : {f : Frm (fst X) ğ‘œ} (x : (snd X) f) (c : Cns (fst X) f ğ‘)
  --   --   â†’ (y : (p : Pos ğ‘) â†’ (snd X) (Shp (fst X) c p))
  --   --   â†’ (d : (p : Pos ğ‘) â†’ Cns (fst X) (Shp (fst X) c p) (ğ‘ p))
  --   --   â†’ (z : (p : Pos ğ‘) (q : Pos (ğ‘ p)) â†’ (snd X) (Shp (fst X) (d p) q))
  --   --   â†’ (Ïˆ : (p : Pos ğ‘) â†’ Cns X (Shp (fst X) c p , y p , d p , z p) (ğ‘Ÿ p)) 
  --   --   â†’ NdCns X ğ‘œ ğ‘ ğ‘ ğ‘Ÿ (f , x , Î¼ (fst X) c d , Î» p â†’ z (fstâ‚š ğ‘ ğ‘ p) (sndâ‚š ğ‘ ğ‘ p)) 















  -- -- Î·-frm â— = tt*
  -- -- Î·-frm (ğ‘œ âˆ£ ğ‘) = Î¼-frm ğ‘ (Î» p â†’ Î·â‚’ (Typ ğ‘ p)) ,
  -- --                 nd-case ğ‘ (Î» p â†’ Î·â‚’ (Typ ğ‘ p)) (Î» p â†’ lfâ‚’) ,
  -- --                 {!!} ,
  -- --                 {!!}
  
  -- -- Î¼-frm objâ‚’ ğ‘ = tt*
  -- -- Î¼-frm (lfâ‚’ {ğ‘œ = ğ‘œ}) ğ‘ = Î·-frm ğ‘œ , lf-case ğ‘œ , Î· (Reprâ‚‹â‚‚ ğ‘œ (Î·â‚’ ğ‘œ)) (Î·-frm ğ‘œ) , const (lf-case ğ‘œ)
  -- -- Î¼-frm (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) Îº = Î¼-frm ğ‘ ğ‘ , {!nd-case ğ‘ ğ‘ ğ‘Ÿ!} , {!!} , {!!}


  -- -- Î¼â‚’ : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  -- --   â†’ ğ’« ğ‘œ
  -- -- Î¼â‚’ objâ‚’ ğ‘ = objâ‚’
  -- -- Î¼â‚’ lfâ‚’ ğ‘ = lfâ‚’
  -- -- Î¼â‚’ (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) ğ‘  =
  -- --   graftâ‚’ (ğ‘  (inl tt))
  -- --     (Î» p â†’ Î¼â‚’ (ğ‘Ÿ p) (Î» q â†’ ğ‘  (inr (p , q))))

  -- -- src-frm : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  -- --   â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
  -- --   â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘) , Faceâ‚‹â‚‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ)) (ğ‘œ âˆ£ ğ‘) 
  -- -- src-frm = {!!}

  -- -- tgt-frm : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ) (ğ‘ : ğ’« (ğ‘œ âˆ£ ğ‘))
  -- --   â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ ğ‘ , Faceâ‚‹â‚‚ ğ‘ ğ‘) (ğ‘œ âˆ£ ğ‘)
  -- -- tgt-frm = {!!} 

  -- -- data Faceâ‚‹â‚ : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ) (ğ‘ : ğ’« (ğ‘œ âˆ£ ğ‘))
  -- --   â†’ {ğ‘œ' : ğ’ª (suc n)} â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ ğ‘ , Faceâ‚‹â‚‚  ğ‘ ğ‘) ğ‘œ' â†’ Type where

  -- --   src-case : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  -- --     â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  -- --     â†’ (ğ‘Ÿ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p âˆ£ ğ‘ p))
  -- --     â†’ Faceâ‚‹â‚ (Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) {!!} 

  -- --   tgt-case : {n : â„•} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ) (ğ‘ : ğ’« (ğ‘œ âˆ£ ğ‘))
  -- --     â†’ Faceâ‚‹â‚ ğ‘ ğ‘ {!!}

  -- -- Reprâ‚‹â‚ â— objâ‚’ = tt* , Î» _ â†’ Unit
  -- -- Reprâ‚‹â‚ (ğ‘œ âˆ£ ğ‘) ğ‘ = (Reprâ‚‹â‚‚ ğ‘œ ğ‘ , Faceâ‚‹â‚‚ ğ‘ ğ‘) , Faceâ‚‹â‚ ğ‘ ğ‘

  -- -- Repr â— objâ‚’ = (tt* , Î» _ â†’ Unit) , Î» _ â†’ Unit
  -- -- Repr (ğ‘œ âˆ£ ğ‘) ğ‘ = ((Reprâ‚‹â‚‚ ğ‘œ ğ‘ , Faceâ‚‹â‚‚ ğ‘ ğ‘) , Faceâ‚‹â‚ ğ‘ ğ‘) , Î» _ â†’ Unit 


  -- -- tgt-frm : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ ğ‘) ğ‘œ 

  -- -- src-frm : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ) (p : Pos ğ‘)
  -- --   â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ ğ‘) (Typ ğ‘ p)

  -- -- tgt-frm .â— objâ‚’ = tt*
  -- -- tgt-frm .(_ âˆ£ Î·â‚’ _) lfâ‚’ = {!!}
  -- -- tgt-frm .(_ âˆ£ Î¼â‚’ ğ‘ ğ‘) (ndâ‚’ ğ‘ ğ‘ ğ‘Ÿ) = {!!}

  -- -- src-frm = {!!} 

  -- -- tgt-frm : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ ğ‘) ğ‘œ 
  -- -- tgt-frm = {!!} 

  -- -- src-frm : âˆ€ {n} (ğ‘œ : ğ’ª n) (ğ‘ : ğ’« ğ‘œ) (p : Pos ğ‘)
  -- --   â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ ğ‘) (Typ ğ‘ p)
  -- -- src-frm = {!!} 

  -- -- Î·-frm : âˆ€ {n} (ğ‘œ : ğ’ª n)
  -- --   â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ (Î·â‚’ ğ‘œ)) ğ‘œ
    
  -- -- Î¼-frm : âˆ€ {n} {ğ‘œ : ğ’ª n} (ğ‘ : ğ’« ğ‘œ)
  -- --   â†’ (ğ‘ : (p : Pos ğ‘) â†’ ğ’« (Typ ğ‘ p))
  -- --   â†’ Frm (Reprâ‚‹â‚‚ ğ‘œ (Î¼â‚’ ğ‘ ğ‘)) ğ‘œ 
